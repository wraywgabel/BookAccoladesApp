do(extract_rows(.))
result <- Critics %>%
group_by(Col2) %>%
filter(row_number() == 2 | row_number() == 4) %>%
summarise(
Author = Col3[row_number() == 2],
Rating = Col3[row_number() == 4]
)
result <- Critics %>%
group_by(Col2) %>%
filter(row_number() == 3 | row_number() == 5) %>%
summarise(
Author = Col3[row_number() == 3],
Rating = Col3[row_number() == 5]
)
result <- Critics %>%
group_by(Col2) %>%
reframe(
Author = Col2[3],  # Extract row 3 for Col2
Rating = Col2[5]   # Extract row 5 for Col2
)
result <- Critics %>%
group_by(Col2) %>%
reframe(
Author = Col2[2],  # Extract row 3 for Col2
Rating = Col2[4]   # Extract row 5 for Col2
)
result <- Critics %>%
group_by(Col1) %>%
reframe(
Author = Col2[2],  # Extract row 3 for Col2
Rating = Col2[4]   # Extract row 5 for Col2
)
result <- Critics %>%
group_by(Col2) %>%
reframe(
Author = Col2[2],  # Extract row 3 for Col2
Rating = Col2[4]   # Extract row 5 for Col2
)
result <- Critics %>%
group_by(Col2) %>%
reframe(
Author = Col3[2],  # Extract row 3 for Col2
Rating = Col3[4]   # Extract row 5 for Col2
)
# Fill blank values in Col1 with the first non-blank value in the group
Critics1 <- Critics %>%
mutate(Col2= ifelse(Col2 == "", NA, Col2)) %>%  # Replace empty strings with NA
fill(Col2, .direction = "down")
result <- Critics1 %>%
group_by(Col2) %>%
reframe(
Author = Col3[2],  # Extract row 3 for Col2
Rating = Col3[4]   # Extract row 5 for Col2
)
result <- Critics1 %>%
group_by(Col2) %>%
reframe(
Author = Col3[3],  # Extract row 3 for Col2
Rating = Col3[5]   # Extract row 5 for Col2
)
Critics<-read.csv("Import/CriticsList.csv")
Readers<-read.csv("Import/ReadersList.csv")
##Reformat critics list##
Critics<-Critics%>%select(-c(Col4))
#Fill blank values in Col1 with the first non-blank value in the group
Critics1<-Critics%>%
mutate(Col2=ifelse(Col2=="", NA, Col2)) %>%
fill(Col2, .direction="down")
#Take the author and rating rows and add to a new column
Critics2<-Critics1 %>%
group_by(Col2) %>%
reframe(
Author = Col3[3],
Rating = Col3[5])
View(Critics2)
##Reformat result##
#Replace unicode
Critics2<-Critics2%>%
mutate(across(everything(), ~ str_replace_all(., "\uFFFD", "")))
#Rename column 2
names(Critics2)[names(Critics2)=="Col2"]<-"Title"
#Delete "Goodreads Author"
Critics2<-Critics2%>%
mutate(Author=str_replace_all(Author, "(remove_this)Goodreads Author)", ""))
#Delete "Goodreads Author"
Critics2<-Critics2%>%
mutate(Author=str_replace_all(Author, "(Goodreads Author)", ""))
#Delete "Goodreads Author"
Critics2<-Critics2%>%
mutate(Author=str_replace_all(Author, "\\(Goodreads Author)\\", ""))
#Delete "Goodreads Author"
Critics2<-Critics2%>%
mutate(Author=str_replace_all(Author, "\\(Goodreads Author\\)", ""))
Critics<-read.csv("Import/CriticsList.csv")
Readers<-read.csv("Import/ReadersList.csv")
##Reformat critics list##
Critics<-Critics%>%select(-c(Col4))
#Fill blank values in Col1 with the first non-blank value in the group
Critics1<-Critics%>%
mutate(Col2=ifelse(Col2=="", NA, Col2)) %>%
fill(Col2, .direction="down")
#Take the author and rating rows and add to a new column
Critics2<-Critics1 %>%
group_by(Col2) %>%
reframe(
Author = Col3[3],
Rating = Col3[5])
##Reformat result##
#Replace unicode
Critics2<-Critics2%>%
mutate(across(everything(), ~ str_replace_all(., "\uFFFD", "")))
#Rename column 2
names(Critics2)[names(Critics2)=="Col2"]<-"Title"
#Delete "Goodreads Author"
Critics2<-Critics2%>%
mutate(Author=str_replace_all(Author, "\\(Goodreads Author\\)", ""))
Critics<-read.csv("Import/CriticsList.csv")
Readers<-read.csv("Import/ReadersList.csv")
##Reformat critics list##
Critics<-Critics%>%select(-c(Col4))
#Fill blank values in Col1 with the first non-blank value in the group
Critics1<-Critics%>%
mutate(Col2=ifelse(Col2=="", NA, Col2)) %>%
fill(Col2, .direction="down")
#Take the author and rating rows and add to a new column
Critics2<-Critics1 %>%
group_by(Col2) %>%
reframe(
Author = Col3[3],
Rating = Col3[5])
##Reformat result##
#Replace unicode
Critics2<-Critics2%>%
mutate(across(everything(), ~ str_replace_all(., "\uFFFD", "")))
#Rename column 2
names(Critics2)[names(Critics2)=="Col2"]<-"Title"
#Delete "Goodreads Author"
Critics2<-Critics2%>%
mutate(Author=str_replace_all(Author, "\\(Goodreads Author\\)", ""))
View(Critics)
options(max.print = 10000)
#Import unformated book lists
Critics<-read.csv("Import/CriticsList.csv")
options(max.print = 1000000)
#Import unformated book lists
Critics<-read.csv("Import/CriticsList.csv")
Critics<-read.csv("Import/CriticsList.csv")
Readers<-read.csv("Import/ReadersList.csv")
##Reformat critics list##
Critics<-Critics%>%select(-c(Col4))
#Fill blank values in Col1 with the first non-blank value in the group
Critics1<-Critics%>%
mutate(Col2=ifelse(Col2=="", NA, Col2)) %>%
fill(Col2, .direction="down")
#Take the author and rating rows and add to a new column
Critics2<-Critics1 %>%
group_by(Col2) %>%
reframe(
Title = Col3[1],
Author = Col3[3],
Rating = Col3[5])
##Reformat result##
#Replace unicode and delete column 2
Critics2<-Critics2%>%
mutate(across(everything(), ~ str_replace_all(., "\uFFFD", "")))%>%
select(-c(Col2))
#Delete "Goodreads Author"
Critics2<-Critics2%>%
mutate(Author=str_replace_all(Author, "\\(Goodreads Author\\)", ""))
#Separate out rating from number of ratings
Critics3<-Critics2%>%
separate(Rating, into=c("Rating", "Number Ratings"), sep=15)
View(Critics3)
Critics<-read.csv("Import/CriticsList.csv")
Readers<-read.csv("Import/ReadersList.csv")
##Reformat critics list##
Critics<-Critics%>%select(-c(Col4))
#Fill blank values in Col1 with the first non-blank value in the group
Critics1<-Critics%>%
mutate(Col2=ifelse(Col2=="", NA, Col2)) %>%
fill(Col2, .direction="down")
#Take the author and rating rows and add to a new column
Critics2<-Critics1 %>%
group_by(Col2) %>%
reframe(
Title = Col3[1],
Author = Col3[3],
Rating = Col3[5])
##Reformat result##
#Replace unicode and delete column 2
Critics2<-Critics2%>%
mutate(across(everything(), ~ str_replace_all(., "\uFFFD", "")))%>%
select(-c(Col2))
#Delete "Goodreads Author"
Critics2<-Critics2%>%mutate(Author=str_replace_all(Author, "\\(Goodreads Author\\)", ""))
#Separate out rating from number of ratings
Critics2<-Critics2%>%separate(Rating, into=c("Rating", "NumberRatings"), sep=15)
#Delete unneccessary text in rating columns
Critics2<-Critics2%>%mutate(Rating=str_replace_all(Rating, " avg rating", ""))
Critics2<-Critics2%>%mutate(NumberRatings=str_replace_all(NumberRatings, " ratings", ""))
#Put X in new column to denote it was from critics list
Critics2$CriticsList<-"Yes"
##Reformat readers list##
Readers<-Readers%>%select(-c(Col4))
View(Readers)
Readers1<-Readers%>%
mutate(Col2=ifelse(Col2=="", NA, Col2)) %>%
fill(Col2, .direction="down")
View(Readers1)
Readers2<-Readers1 %>%
group_by(Col2) %>%
reframe(
Title = Col3[1],
Author = Col3[3],
Rating = Col3[5])
View(Readers2)
Readers2<-Readers2%>%
mutate(across(everything(), ~ str_replace_all(., "\uFFFD", "")))%>%
select(-c(Col2))
Readers2<-Readers2%>%mutate(Author=str_replace_all(Author, "\\(Goodreads Author\\)", ""))
#Separate out rating from number of ratings
Readers2<-Readers2%>%separate(Rating, into=c("Rating", "NumberRatings"), sep=15)
#Delete unneccessary text in rating columns
Readers2<-Readers2%>%mutate(Rating=str_replace_all(Rating, " avg rating", ""))
Readers2<-Readers2%>%mutate(NumberRatings=str_replace_all(NumberRatings, " ratings", ""))
Readers<-read.csv("Import/ReadersList.csv")
Readers<-Readers%>%select(-c(Col4))
#Fill blank values in Col1 with the first non-blank value in the group
Readers1<-Readers%>%
mutate(Col2=ifelse(Col2=="", NA, Col2)) %>%
fill(Col2, .direction="down")
#Take the author and rating rows and add to a new column
Readers2<-Readers1 %>%
group_by(Col2) %>%
reframe(
Title = Col3[1],
Author = Col3[3],
Rating = Col3[5])
##Reformat result##
#Replace unicode and delete column 2
Readers2<-Readers2%>%
mutate(across(everything(), ~ str_replace_all(., "\uFFFD", "")))%>%
select(-c(Col2))
#Delete "Goodreads Author"
Readers2<-Readers2%>%mutate(Author=str_replace_all(Author, "\\(Goodreads Author\\)", ""))
#Separate out rating from number of ratings
Readers2<-Readers2%>%separate(Rating, into=c("Rating", "NumberRatings"), sep=15)
#Delete unneccessary text in rating columns
Readers2<-Readers2%>%mutate(Rating=str_replace_all(Rating, " avg rating", ""))
Readers2<-Readers2%>%mutate(NumberRatings=str_replace_all(NumberRatings, " ratings", ""))
Readers<-read.csv("Import/ReadersList.csv")
Readers<-Readers%>%select(-c(Col4))
#Fill blank values in Col1 with the first non-blank value in the group
Readers1<-Readers%>%
mutate(Col2=ifelse(Col2=="", NA, Col2)) %>%
fill(Col2, .direction="down")
#Take the author and rating rows and add to a new column
Readers2<-Readers1 %>%
group_by(Col2) %>%
reframe(
Title = Col3[1],
Author = Col3[3],
Rating = Col3[5])
##Reformat result##
#Replace unicode and delete column 2
Readers2<-Readers2%>%
mutate(across(everything(), ~ str_replace_all(., "\uFFFD", "")))%>%
select(-c(Col2))
#Delete "Goodreads Author"
Readers2<-Readers2%>%mutate(Author=str_replace_all(Author, "\\(Goodreads Author\\)", ""))
#Separate out rating from number of ratings
Readers2<-Readers2%>%separate(Rating, into=c("Rating", "NumberRatings"), sep=15)
#Delete unneccessary text in rating columns
Readers2<-Readers2%>%mutate(Rating=str_replace_all(Rating, " avg rating", ""))
Readers2<-Readers2%>%mutate(NumberRatings=str_replace_all(NumberRatings, " ratings", ""))
Readers<-read.csv("Import/ReadersList.csv")
Readers<-Readers%>%select(-c(Col4))
#Fill blank values in Col1 with the first non-blank value in the group
Readers1<-Readers%>%
mutate(Col2=ifelse(Col2=="", NA, Col2)) %>%
fill(Col2, .direction="down")
#Take the author and rating rows and add to a new column
Readers2<-Readers1 %>%
group_by(Col2) %>%
reframe(
Title = Col3[1],
Author = Col3[3],
Rating = Col3[5])
##Reformat result##
#Replace unicode and delete column 2
Readers2<-Readers2%>%
mutate(across(everything(), ~ str_replace_all(., "\uFFFD", "")))%>%
select(-c(Col2))
#Delete "Goodreads Author"
Readers2<-Readers2%>%mutate(Author=str_replace_all(Author, "\\(Goodreads Author\\)", ""))
#Separate out rating from number of ratings
Readers2<-Readers2%>%separate(Rating, into=c("Rating", "NumberRatings"), sep=15)
#Delete unneccessary text in rating columns
Readers2<-Readers2%>%mutate(Rating=str_replace_all(Rating, " avg rating", ""))
Readers2<-Readers2%>%mutate(NumberRatings=str_replace_all(NumberRatings, " ratings", ""))
#Put X in new column to denote it was from readers list
Readers2$ReadersList<-"Yes"
Critics<-read.csv("Import/CriticsList.csv")
Readers<-read.csv("Import/ReadersList.csv")
##Reformat critics list##
Critics<-Critics%>%select(-c(Col4))
#Fill blank values in Col1 with the first non-blank value in the group
Critics1<-Critics%>%
mutate(Col2=ifelse(Col2=="", NA, Col2)) %>%
fill(Col2, .direction="down")
#Take the author and rating rows and add to a new column
Critics2<-Critics1 %>%
group_by(Col2) %>%
reframe(
Title = Col3[1],
Author = Col3[3],
Rating = Col3[5])
##Reformat result##
#Replace unicode and delete column 2
Critics2<-Critics2%>%
mutate(across(everything(), ~ str_replace_all(., "\uFFFD", "")))%>%
select(-c(Col2))
#Delete "Goodreads Author"
Critics2<-Critics2%>%mutate(Author=str_replace_all(Author, "\\(Goodreads Author\\)", ""))
#Separate out rating from number of ratings
Critics2<-Critics2%>%separate(Rating, into=c("Rating", "NumberRatings"), sep=15)
#Delete unneccessary text in rating columns
Critics2<-Critics2%>%mutate(Rating=str_replace_all(Rating, " avg rating", ""))
Critics2<-Critics2%>%mutate(NumberRatings=str_replace_all(NumberRatings, " ratings", ""))
# #Put X in new column to denote it was from critics list
# Critics2$CriticsList<-"Yes"
##Reformat readers list##
Readers<-Readers%>%select(-c(Col4))
#Fill blank values in Col1 with the first non-blank value in the group
Readers1<-Readers%>%
mutate(Col2=ifelse(Col2=="", NA, Col2)) %>%
fill(Col2, .direction="down")
#Take the author and rating rows and add to a new column
Readers2<-Readers1 %>%
group_by(Col2) %>%
reframe(
Title = Col3[1],
Author = Col3[3],
Rating = Col3[5])
##Reformat result##
#Replace unicode and delete column 2
Readers2<-Readers2%>%
mutate(across(everything(), ~ str_replace_all(., "\uFFFD", "")))%>%
select(-c(Col2))
#Delete "Goodreads Author"
Readers2<-Readers2%>%mutate(Author=str_replace_all(Author, "\\(Goodreads Author\\)", ""))
#Separate out rating from number of ratings
Readers2<-Readers2%>%separate(Rating, into=c("Rating", "NumberRatings"), sep=15)
#Delete unneccessary text in rating columns
Readers2<-Readers2%>%mutate(Rating=str_replace_all(Rating, " avg rating", ""))
Readers2<-Readers2%>%mutate(NumberRatings=str_replace_all(NumberRatings, " ratings", ""))
# #Put X in new column to denote it was from readers list
# Readers2$ReadersList<-"Yes"
##Merge two lists##
BookList<-bind_rows(Critics2, Readers2)
View(BookList)
Critics<-read.csv("Import/CriticsList.csv")
Readers<-read.csv("Import/ReadersList.csv")
##Reformat critics list##
Critics<-Critics%>%select(-c(Col4))
#Fill blank values in Col1 with the first non-blank value in the group
Critics1<-Critics%>%
mutate(Col2=ifelse(Col2=="", NA, Col2)) %>%
fill(Col2, .direction="down")
#Take the author and rating rows and add to a new column
Critics2<-Critics1 %>%
group_by(Col2) %>%
reframe(
Title = Col3[1],
Author = Col3[3],
Rating = Col3[5])
##Reformat result##
#Replace unicode and delete column 2
Critics2<-Critics2%>%
mutate(across(everything(), ~ str_replace_all(., "\uFFFD", "")))%>%
select(-c(Col2))
#Delete "Goodreads Author"
Critics2<-Critics2%>%mutate(Author=str_replace_all(Author, "\\(Goodreads Author\\)", ""))
#Separate out rating from number of ratings
Critics2<-Critics2%>%separate(Rating, into=c("Rating", "NumberRatings"), sep=15)
#Delete unneccessary text in rating columns
Critics2<-Critics2%>%mutate(Rating=str_replace_all(Rating, " avg rating", ""))
Critics2<-Critics2%>%mutate(NumberRatings=str_replace_all(NumberRatings, " ratings", ""))
#Put X in new column to denote it was from critics list
Critics2$CriticsList<-"Yes"
Critics2$ReadersList<-""
##Reformat readers list##
Readers<-Readers%>%select(-c(Col4))
#Fill blank values in Col1 with the first non-blank value in the group
Readers1<-Readers%>%
mutate(Col2=ifelse(Col2=="", NA, Col2)) %>%
fill(Col2, .direction="down")
#Take the author and rating rows and add to a new column
Readers2<-Readers1 %>%
group_by(Col2) %>%
reframe(
Title = Col3[1],
Author = Col3[3],
Rating = Col3[5])
##Reformat result##
#Replace unicode and delete column 2
Readers2<-Readers2%>%
mutate(across(everything(), ~ str_replace_all(., "\uFFFD", "")))%>%
select(-c(Col2))
#Delete "Goodreads Author"
Readers2<-Readers2%>%mutate(Author=str_replace_all(Author, "\\(Goodreads Author\\)", ""))
#Separate out rating from number of ratings
Readers2<-Readers2%>%separate(Rating, into=c("Rating", "NumberRatings"), sep=15)
#Delete unneccessary text in rating columns
Readers2<-Readers2%>%mutate(Rating=str_replace_all(Rating, " avg rating", ""))
Readers2<-Readers2%>%mutate(NumberRatings=str_replace_all(NumberRatings, " ratings", ""))
#Put X in new column to denote it was from readers list
Readers2$ReadersList<-"Yes"
Readers2$CriticsList<-""
##Merge two lists##
BookList<-bind_rows(Critics2, Readers2)
# Aggregate duplicates
BookList1<-BookList %>%
group_by(Title) %>%
summarise(
CriticsList=ifelse(any(CriticsList=="Yes"), "Yes", NA),
ReadersList=ifelse(any(ReadersList=="Yes"), "Yes", NA),
.groups='drop')
View(BookList1)
Critics<-read.csv("Import/CriticsList.csv")
Readers<-read.csv("Import/ReadersList.csv")
##Reformat critics list##
Critics<-Critics%>%select(-c(Col4))
#Fill blank values in Col1 with the first non-blank value in the group
Critics1<-Critics%>%
mutate(Col2=ifelse(Col2=="", NA, Col2)) %>%
fill(Col2, .direction="down")
#Take the author and rating rows and add to a new column
Critics2<-Critics1 %>%
group_by(Col2) %>%
reframe(
Title = Col3[1],
Author = Col3[3],
Rating = Col3[5])
##Reformat result##
#Replace unicode and delete column 2
Critics2<-Critics2%>%
mutate(across(everything(), ~ str_replace_all(., "\uFFFD", "")))%>%
select(-c(Col2))
#Delete "Goodreads Author"
Critics2<-Critics2%>%mutate(Author=str_replace_all(Author, "\\(Goodreads Author\\)", ""))
#Separate out rating from number of ratings
Critics2<-Critics2%>%separate(Rating, into=c("Rating", "NumberRatings"), sep=15)
#Delete unneccessary text in rating columns
Critics2<-Critics2%>%mutate(Rating=str_replace_all(Rating, " avg rating", ""))
Critics2<-Critics2%>%mutate(NumberRatings=str_replace_all(NumberRatings, " ratings", ""))
#Put X in new column to denote it was from critics list
Critics2$CriticsList<-"Yes"
Critics2$ReadersList<-""
##Reformat readers list##
Readers<-Readers%>%select(-c(Col4))
#Fill blank values in Col1 with the first non-blank value in the group
Readers1<-Readers%>%
mutate(Col2=ifelse(Col2=="", NA, Col2)) %>%
fill(Col2, .direction="down")
#Take the author and rating rows and add to a new column
Readers2<-Readers1 %>%
group_by(Col2) %>%
reframe(
Title = Col3[1],
Author = Col3[3],
Rating = Col3[5])
##Reformat result##
#Replace unicode and delete column 2
Readers2<-Readers2%>%
mutate(across(everything(), ~ str_replace_all(., "\uFFFD", "")))%>%
select(-c(Col2))
#Delete "Goodreads Author"
Readers2<-Readers2%>%mutate(Author=str_replace_all(Author, "\\(Goodreads Author\\)", ""))
#Separate out rating from number of ratings
Readers2<-Readers2%>%separate(Rating, into=c("Rating", "NumberRatings"), sep=15)
#Delete unneccessary text in rating columns
Readers2<-Readers2%>%mutate(Rating=str_replace_all(Rating, " avg rating", ""))
Readers2<-Readers2%>%mutate(NumberRatings=str_replace_all(NumberRatings, " ratings", ""))
#Put X in new column to denote it was from readers list
Readers2$ReadersList<-"Yes"
Readers2$CriticsList<-""
##Merge two lists##
BookList<-bind_rows(Critics2, Readers2)
# Aggregate duplicates
BookList1<-BookList %>%
group_by(Title) %>%
summarise(
CriticsList=ifelse(any(CriticsList=="Yes"), "Yes", NA),
ReadersList=ifelse(any(ReadersList=="Yes"), "Yes", NA),
Author=first(Author),
Rating=first(Rating),
NumberRatings=first(NumberRatings),
.groups='drop')
#Reorder columns
BookList1[,c(1,4,5,6,2,3)]
#Reorder columns
BookList1<-BookList1[,c(1,4,5,6,2,3)]
#Add read column
BookList1$Read<-""
##Export##
write.csv(BookList1, "Export/Best100Booksof21stCentury.csv", row.names=FALSE)
##Export##
write.csv(BookList1, "Export/Best100Booksof21stCentury.csv", row.names=FALSE, na="")
##Export##
write.csv(BookList1, "Export/Best100Booksof21stCentury.csv", row.names=FALSE, na="")
